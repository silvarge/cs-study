# 네트워크 기기

계층 별로 처리할 수 있는 기기가 나뉘어져 있다. 상위 계층의 기기는 하위 계층을 처리할 수 있지만 하위 계층의 기기는 상위 계층을 처리할 수 없다.

## 어플리케이션 계층

어플리케이션 계층에는 L7 스위치가 있다.

> 스위치란?
>
> 여러 장비를 하나의 네트워크로 연결하고, 목적지로만 데이터를 전송해주는 기기. 허브처럼 연결된 모든 포트로 전송하는 것이 아닌 목적지 한곳으로만 데이터를 전송한다.

L7 스위치는 흔히 로드밸런서라고도 불리며, 서버의 부하를 분산하는 기기이다. 클라이언트로부터의 요청을 여러개의 서버로 나누는 역할을 하며, 시스템의 처리량 증가를 목표로 한다. URL, 서버, 캐시, 쿠키 등을 기반으로 트래픽을 분산한다. 

로드 밸런서로는 L7 이외에도 L4 스위치가 있다. L4 스위치는 전송 계층을 처리하는 기기로, 어플리케이션 레벨의 메세지를 인식하지 못하고 IP와 포트를 기반으로 트래픽을 분산한다.

두 스위치 모두 헬스 체크를 통해 서버의 상태를 판별한다. 헬스 체크는 반복적으로 서버에 요청을 보내 서버가 정상 상태인지 체크하는 것을 의미한다. 서버에 부하가 되지 않을만큼 적절한 주기로 전송해야 한다. TCP, HTTP 등의 방법으로 요청해서 정상 응답이 오면 정상적인 서버로 판단한다.

로드 밸런서를 이용하면 서버 이중화를 사용할 수 있다. 서버를 안정적으로 운영하기 위해서 2대 이상의 서버를 띄워놓아야 한다. 사용자가 가상 IP를 사용한 로드 밸런서에 접속하면, 로드 밸런서가 사용 가능한 서버로 요청을 전달해준다. 만약 한 서버가 장애가 발생해서 사용할 수 없다면, 그 서버를 제외한 다른 서버로 요청을 전달해서 안정적인 서비스를 제공한다.

## 네트워크 계층

네트워크 계층에는 라우터와 L3 스위치가 존재한다.

라우터는 서로 다른 네트워크를 연결, 분할, 구분시키고 라우팅을 하는 장비이다.

L3 스위치는 L2 스위치에 라우팅 기능을 추가한 장비다. 라우터와 달리 하드웨어 기반으로 처리하고, 주로 LAN 환경에서 사용한다. 

## 데이터 링크 계층

데이터 링크 계층에는 브리지와 L2 스위치가 존재한다.

브리지는 LAN과 LAN을 연결하는 기기이다. 통신망 범위를 확장하고 서로 다른 LAN으로 이루어진 하나의 통신망을 구축할 때 사용된다. 현재는 L2 스위치가 브리지의 역할을 대체하였다.

L2 스위치는 MAC 주소를 사용해서 데이터를 전달하는 기기이다. 허브와 달리 목적지에만 프레임을 전송한다. 내부적으로 MAC 주소 테이블을 가지고 있으며, 연결된 기기들의 MAC 주소를 관리한다. 2계층 기기이기 때문에 IP는 인식하지 못한다. 목적지의 MAC 주소가 테이블에 없으면 전체 포트에 프레임을 전송하며, 테이블의 주소는 일정 시간 이후에 삭제될 수 있다.

## 물리 계층

물리 계층에는 NIC, 리피터, AP가 존재한다.

NIC(Network Interface Card)는 랜카드 라고도 한다. 네트워크를 통해 데이터를 송수신할 수 있도록 하는 확장 카드이다. NIC는 각각의 고유한 MAC 주소를 가진다.

리피터는 약해진 신호를 증폭시켜서 보내주는 장치이다. 현재는 광 케이블이 보급되어 잘 사용되지 않는다.

AP는 유선 네트워크를 무선 네트워크로 변환하는 기기이다. AP에 유선 LAN을 연결하고, 무선 LAN 기술을 이용해 다른 무선 기기에서 네트워크에 접속할 수 있도록 한다.

