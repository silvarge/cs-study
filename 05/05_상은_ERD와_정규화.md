# 데이터 모델 구현 절차

1. 요구조건 분석
2. 개념적 설계 → 주요 산출물: ERD
3. 논리적 설계 → DBMS에 맞는 논리적 스키마 설계
4. 물리적 설계 → 각 DBMS의 특성을 고려하여 DB 저장 구조(물리 데이터 모델)로 변환
5. 구현

# ERD

ERD(Entity Relationship Diagram)은 E-R Diagram, 즉 엔티티와 관계를 시각화하여 표현하는 것이다.

데이터 모델을 구성하는 절차 중 ‘개념적 설계’에 해당한다.

- 데이터베이스를 구축할 때 가장 기초적인 뼈대 역할
- 릴레이션 간의 관계들을 정의한 것
- 비정형 데이터를 충분히 표현할 수 없다는 단점 존재
    - 하지만 대체로 RDB를 기본 DB로 이용하기에, 일반적인 상황에서는 잘 이용될 것이라고 생각한다.

그리고 이러한 ERD를 기반으로, 사용할 DBMS에 맞는 논리적인 스키마를 설계하는 것이다.

# 정규화

이상 현상이 발생하는 릴레이션을 분해하여 이상 현상을 없애는 과정

## 이상 현상

테이블 설계 시 잘못된 설계로 인한여, 데이터 삽입/삭제/수정 시 논리적으로 생기는 오류를 의미한다.

- 갱신 이상: 중복 데이터 중 특정 부분만 수정되어 중복값이 모순을 일으킴
- 삽입 이상: 정보 저장 시 불필요한 세부 정보 입력 필요
- 삭제 이상: 정보 삭제 시 원치 않는 다른 정보도 함께 삭제

## 함수 종속성

### **종속성이란?**

어떤 속성 A의 값을 알면 다른 속성 B의 값이 유일하게 정해지는 관계

A→B라고 표현한다면, A를 B의 결정자라고 지칭

학과와 학과 사무실을 예시로 들자면,
학과가 존재해야지 그에 맞는 학과 사무실이 결정될 수 있기 때문에, 여기서는 학과가 결정자가 되고, 학과 사무실이 의존 관계가 된다. 학과가 없다면 학과 사무실은 존재할 수 없기 때문이다.

### 함수 종속성

많이 나오는 함수 종속성 규칙이다. (다른 규칙도 존재)

- 부분 함수 종속: 기본 키가 복합 키일 경우, 기본 키를 구성하는 속성 중 일부에게 종속
- 완전 함수 종속: X → Y 관계가 있을 때, Y는 X의 전체 속성에 대해 종속하고, 부분 집합 속성에 종속하지 않는 경우
- 이행적 함수 종속: X → Y, Y → Z 종속 관계에서 X → Z가 성립하는 경우

## 이상 현상과 함수 종속성

한 개의 릴레이션에 두 개 이상의 속성이 포함되어 있고, 기본키가 아닌 속성이 결정자일 때 발생한다.

아래는 학생수강성적이라는 테이블이다.

| 학번 | 이름 | 주소 | 학과 | 학과 사무실 | 강좌 이름 | 강의실 | 성적 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 101 | 김이름 | 주소1 | 소프트웨어 | 공학관101 | 프로그래밍 | 공학관110 | 3.5 |
| 102 | 이이름 | 주소2 | 정보보호 | 공학관201 | 프로그래밍 | 공학관110 | 4.0 |
| 201 | 박이름 | 주소3 | 경영 | 인문관203 | 경영입문 | 인문관310 | 4.5 |
| 203 | 최이름 | 주소4 | 수학 | 자연관105 | 자료구조 | 공학관210 | 3.5 |
| 300 | 한이름 | 주소5 | 철학 | 인문관210 | 자료구조 | 공학관210 | 4.0 |

여기서 기본 키가 아니지만 결정자가 될 수 있는 강좌 정보(강좌 이름, 강의실)이 한 릴레이션에 포함되어 이상 현상이 나타날 수 있다.

학과, 학생 번호, 강좌 이름은 기본키 일부가 아닌, 또 다른 속성이 결정자가 되는 경우(=부분적 함수 종속성)이다.
학과는 학과 사무실을 결정하고, 강좌 이름은 강의실을 결정한다. 학번은 이름과 주소 등을 결정한다.

가볍게 보자면,

학생의 수강 성적을 ‘학생수강성적’ 테이블에 입력하려는데, 어떤 것을 수강했는지, 그리고 성적, 학생의 이름 혹은 학번 정도만 존재하면 되는 것이다. 그런데 여기에 주소와, 학과 사무실은 어디인지 그런 것들이 필요한 데이터일까? 수강 성적을 위한 테이블인데? 이는 삽입 이상이 발생했다고 볼 수 있을 것이다.

두 번째로는, 만약 ‘201번 학번을 지닌 박이름이 들은 ‘경영입문’ 강좌’의 성적 데이터를 삭제하고자 하여 삭제한다면, 학과 사무실, 강의실 등도 함께 삭제가 되는 것이다. 단순히 ‘201번 박이름’이 수강한 ‘경영입문’의 성적만을 삭제하고 싶은 것인데 학과 사무실 정보와 강의실 등의 정보도 같이 삭제되는 것이다. 이는 삭제 이상이 발생했다고 볼 수 있다.

또한 ‘102번 이이름이 듣는 프로그래밍 강좌의 강의실 정보’를 ‘공학관120’으로 바꾼다고 가정해보자. 그러면 그 위에 똑같이 프로그래밍 강좌를 듣는데 강의실이 이전 정보인 ‘공학과110’으로 있는 것이다. 그러면 이는 갱신 이상이라고 볼 수 있다. 똑같은 강좌를 듣는데 강의실이 다르다는 것은 모순을 일으키는 것이기 때문이다.

따라서 이와 같이 기본 키가 아닌 속성이 결정자일 때 이상 현상이 발생할 수 있으니, 이러한 문제를 해결하기 위해 릴레이션을 분해하여 이상 현상을 없애는 과정을 **정규화**라고 한다.

## 정규형의 종류

이상 현상이 있는 릴레이션은 이상 현상을 일으키는 함수 종속성의 유형에 따라 등급을 분류할 수 있다.

릴레이션은 정규형 개념으로 구분하며, 정규형이 높을 수록 이상현상은 줄어든다. (그만큼 분해되었다는 의미)

기본적으로 정규형의 등급이 높아지면, 해당 등급 이하의 정규형은 모두 만족한다고 볼 수 있다.

너무 많이 테이블이 분해되면 그 또한 조인 등 연산의 효율성이 떨어지기에, 제2정규형-제3정규형 정도의 수준으로 실무에서는 고려한다고 한다.

### 제1정규형(1NF)

모든 속성이 원자값을 갖는 경우

- 복합 속성을 분해

### 제2정규형(2NF)

부분 함수 종속 제거

- 기본 키 속성이 여러 개일 때(복합 기본 키), 그 중 하나만으로도 기본 키를 사용할 수 있는 속성값이 있다면, 없애야 함

### 제3정규형(3NF)

이행적 함수 종속 제거 (모든 기본 키가 아닌 속성이 기본 키에만 직접적으로 종속되어야 함)

- 속성에 종속적인 속성을 분리
- 기본 키가 아닌 속성들 중 테이블을 따로 분리할 수 있는 속성들이 있다면, 그것들을 분리해야 한다

### 보이스-코드 정규형(BCNF)

결정자 함수 종속 제거

- 모든 결정자가 후보 키여야 한다

### 제4정규형(4NF)

다치 종속 제거 (다중 값 종속 제거)

- 특정 속성 값에 따라 선택적인 속성을 분리

### 제5정규형(5NF)

조인 종속 제거

# 참고자료

---

- 내가 작성한 정보처리기사 정리 기록

https://mangkyu.tistory.com/28

https://mangkyu.tistory.com/110
