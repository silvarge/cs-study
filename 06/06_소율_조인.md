## 1️⃣ 조인의 기본 개념

- **두 개 이상의 테이블을 묶어 하나의 결과 집합을 만드는 것**
- SQL에서 데이터 분석·조회 시 필수적인 기능
- MongoDB도 조인 연산 가능하지만, **RDBMS 대비 성능이 떨어져 잘 쓰지 않음**

## 2️⃣ 조인의 종류
<img width="568" height="416" alt="스크린샷 2025-09-18 오후 1 49 27" src="https://github.com/user-attachments/assets/481fb642-9a1b-4246-adea-08533930d074" />
### 🔹 내부 조인 (INNER JOIN)

- 두 테이블 모두 **일치하는 행**만 반환
- `JOIN` 키워드만 써도 내부 조인 기본 적용

### 🔹 왼쪽 조인 (LEFT OUTER JOIN)

- **왼쪽 테이블 전체 + 일치하는 오른쪽 테이블 데이터** 반환
- 오른쪽에 매칭이 없으면 `NULL`

### 🔹 오른쪽 조인 (RIGHT OUTER JOIN)

- **오른쪽 테이블 전체 + 일치하는 왼쪽 테이블 데이터** 반환
- 왼쪽에 매칭이 없으면 `NULL`

### 🔹 합집합 조인 (FULL OUTER JOIN)

- 양쪽 테이블 모든 데이터 반환 (일치하지 않아도 표시)
- MySQL은 미지원 → `LEFT JOIN + RIGHT JOIN + UNION`으로 구현

### 🔹 크로스 조인 (CROSS JOIN)

- 모든 경우의 수 반환 (`A × B`)
- 결과 행 수 = N × M (카디널리티 곱)

### 🔹 셀프 조인 (SELF JOIN)

- **자기 자신과 조인**
- 하나의 테이블을 여러 번 복사하여 조인

## 3️⃣ 조인 알고리즘

### 🔹 중첩 루프 조인 (NLJ, Nested Loop Join)

- 중첩 `for`문처럼 동작
- Driving Table(먼저 읽는 테이블)과 Driven Table(나중에 읽는 테이블) 존재
- Driving Table 크기가 크면 성능 저하
- 인덱스가 없으면 Full Table Scan 발생 → 성능 저하
- 대용량 테이블에는 비효율적
- 변형: **블록 NLJ** (블록 단위로 조인 → 성능 개선)


### 🔹 정렬 병합 조인 (SMJ, Sort Merge Join)

- 각 테이블을 **조인 키 기준으로 정렬 후 병합**
- 인덱스가 없거나, 대용량 테이블 조인에 적합
- 범위 비교 (`>`, `<`) 조인에도 활용 가능
- 절차:
    1. 각 테이블 독립적으로 읽음 (인덱스 없으면 Full Scan)
    2. 조인 키 기준 정렬
    3. 정렬된 결과를 병합


### 🔹 해시 조인 (Hash Join) → MySQL 8.0부터 지원

- **해시 테이블 기반 조인**
- 동등 조인(`=`)만 가능
- Sort Merge Join보다 효율적일 수 있음
- 절차:
    1. **Build 단계**: 작은 테이블을 읽어 해시 테이블 생성 (Build Input)
    2. **Probe 단계**: 큰 테이블을 읽어 해시 값 비교 후 매칭된 데이터 반환 (Probe Input)
- 장점: 각 테이블을 한 번만 읽음 → NLJ보다 효율적
- 메모리 크기: `join_buffer_size`로 제어
